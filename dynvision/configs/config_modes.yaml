# Local Settings
use_local_mode: "auto"
local:
  enable_progress_bar: True
  use_debug_mode: True
  use_distributed_mode: False
  verbose: True
  # use_ffcv: False 
  num_workers: 0
  persistent_workers: False

# Debugging Settings
use_debug_mode: False
debug:
  batch_size: 32
  check_val_every_n_epoch: 1
  log_every_n_steps: 1
  accumulate_grad_batches: 1
  enable_progress_bar: True

# Distributed Settings
use_distributed_mode: True
distributed:
  use_distributed: True
  strategy: "ddp"  # Use standard DDP for SLURM compatibility
  devices: 4  # Number of GPUs per node
  num_nodes: 1  # Number of compute nodes
  sync_batchnorm: True
  precision: "bf16-mixed"  # Options: 32, 16-mixed, bf16-mixed
  accelerator: "gpu"  # Explicitly set GPU accelerator
  accumulate_grad_batches: 2
  batch_size: 256
  num_workers: 16
  persistent_workers: True
  # Advanced DDP settings
  strategy_kwargs:
    find_unused_parameters: True  # Set to True if your model has unused parameters
    gradient_as_bucket_view: True  # Use bucket views for gradients
    process_group_backend: "nccl"  # Use NCCL for GPU communication
    static_graph: True

# Large Dataset Settings
use_large_dataset_mode: False
large_dataset:
  batch_size: 64
  persistent_workers: False
  num_workers: 4
  pin_memory: False
  os_cache: False
  chunksize: 10000
  
